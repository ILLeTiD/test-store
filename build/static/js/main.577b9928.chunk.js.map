{"version":3,"sources":["components/shop-header/index.js","components/shop-header/shop-header.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/spinner/index.js","components/spinner/spinner.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","actions/index.js","utils/compose.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/shopping-cart-table/shopping-cart-table.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","store.js","index.js"],"names":["ShopHeader","connect","store","orderTotal","shoppingCart","cartItems","reduce","acc","i","total","count","_ref","numItems","react_default","a","createElement","className","Link","to","BookListItem","book","onAddedToCart","title","author","price","coverImage","src","alt","onClick","ErrorIndicator","error","console","log","message","Spinner","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","bookstoreService","Object","assign","bookAddedToCart","bookID","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","err","booksError","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","wrapped","f","BookListContainer","this","_this$props","books","loading","components_spinner","components_error_indicator","book_list_BookList","Component","BookList","_ref2","map","key","id","components_book_list_item","_ref$bookList","bookList","ownProps","HomePage","components_book_list","mapDispatchToProps","onDecrease","onIncrease","onDelete","_ref2$shoppingCart","items","item","idx","CartPage","shopping_cart_table_shopping_cart_table","App","role","components_shop_header","Switch","Route","path","component","exact","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","qty","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","updateShoppingCart","reducer","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","es","error_boundry","value","BrowserRouter","components_app","document","getElementById"],"mappings":"2WAEeA,ECwBAC,YATS,SAAAC,GACtB,MAAO,CACLC,WAAYD,EAAME,aAAaC,UAAUC,OACvC,SAACC,EAAKC,GAAN,OAAYD,EAAMC,EAAEC,OACpB,GAEFC,MAAOR,EAAME,aAAaC,UAAUC,OAAO,SAACC,EAAKC,GAAN,OAAYD,EAAMC,EAAEE,OAAO,KAG3DT,CAtBI,SAAAU,GAA4CA,EAAzCC,SAAyCD,EAA/BF,MAA+B,IAAxBN,EAAwBQ,EAAxBR,WAAYO,EAAYC,EAAZD,MACjD,OACEG,EAAAC,EAAAC,cAAA,UAAQC,UAAU,mBAChBH,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAMD,UAAU,iBAAiBE,GAAG,KAApC,cAGAL,EAAAC,EAAAC,cAACE,EAAA,EAAD,CAAMD,UAAU,gBAAgBE,GAAG,SACjCL,EAAAC,EAAAC,cAAA,KAAGC,UAAU,kCACZN,EAFH,YAEmBP,EAFnB,8CCRSgB,SCCM,SAAAR,GAA6B,IAA1BS,EAA0BT,EAA1BS,KAAMC,EAAoBV,EAApBU,cACpBC,EAAqCF,EAArCE,MAAOC,EAA8BH,EAA9BG,OAAQC,EAAsBJ,EAAtBI,MAAOC,EAAeL,EAAfK,WAC9B,OACEZ,EAAAC,EAAAC,cAAA,OAAKC,UAAU,kBACbH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cACbH,EAAAC,EAAAC,cAAA,OAAKW,IAAKD,EAAYE,IAAI,WAE5Bd,EAAAC,EAAAC,cAAA,OAAKC,UAAU,gBACbH,EAAAC,EAAAC,cAAA,QAAMC,UAAU,cAAcM,GAC9BT,EAAAC,EAAAC,cAAA,OAAKC,UAAU,eAAeO,GAC9BV,EAAAC,EAAAC,cAAA,OAAKC,UAAU,cAAf,IAA8BQ,GAC9BX,EAAAC,EAAAC,cAAA,UAAQa,QAASP,EAAeL,UAAU,4BAA1C,mBCZOa,SCCQ,SAAAlB,GAAe,IAAZmB,EAAYnB,EAAZmB,MAGxB,OAFAC,QAAQC,IAAIF,GAELjB,EAAAC,EAAAC,cAAA,qBAAae,EAAMG,WCJbC,SCCC,WACd,OAAOrB,EAAAC,EAAAC,cAAA,6BCCLoB,IAAMC,gBAFEC,IAAVC,SACUC,IAAVC,SCeaC,EAhBc,kBAAM,SAACC,GAElC,OAAO,SAACC,GACN,OACE9B,EAAAC,EAAAC,cAACwB,EAAD,KAEI,SAACK,GACC,OAAQ/B,EAAAC,EAAAC,cAAC2B,EAADG,OAAAC,OAAA,GAAaH,EAAb,CACCC,iBAAkBA,UCQjCG,EAAkB,SAAAC,GACtB,MAAO,CACLC,KAAM,qBACNC,QAASF,IAePG,EAAa,SAACP,EAAkBQ,GAAnB,OAAgC,WACjDA,EArCO,CACLH,KAAM,wBAqCRL,EACGS,WACAC,KAAK,SAAAC,GAAI,OAAIH,EAlCT,CACLH,KAAM,sBACNC,QAgCmCK,MAClCC,MAAM,SAAAC,GAAG,OAAIL,EA7BC,SAAAK,GACjB,MAAO,CACLR,KAAM,sBACNC,QAASO,GA0BcC,CAAWD,QCrCvBE,EALC,mBAAAC,EAAAC,UAAAC,OAAIC,EAAJ,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAIF,EAAJE,GAAAJ,UAAAI,GAAA,OAAc,SAACC,GAC7B,OAAOH,EAAMI,YACX,SAACC,EAASC,GAAV,OAAgBA,EAAED,IAAUF,KCgB1BI,qMAcFC,KAAK5B,MAAMQ,8CAIJ,IAAAqB,EAC0CD,KAAK5B,MAA9C8B,EADDD,EACCC,MAAOC,EADRF,EACQE,QAAS5C,EADjB0C,EACiB1C,MAAOT,EADxBmD,EACwBnD,cAC/B,OAAIqD,EAAgB7D,EAAAC,EAAAC,cAAC4D,EAAD,MAChB7C,EAAcjB,EAAAC,EAAAC,cAAC6D,EAAD,CAAgB9C,MAAOA,IAClCjB,EAAAC,EAAAC,cAAC8D,EAAD,CAAUxD,cAAeA,EAAeoD,MAAOA,WAtB1BK,cAoC1BC,EAAW,SAAAC,GAA8B,IAA3BP,EAA2BO,EAA3BP,MAAOpD,EAAoB2D,EAApB3D,cACzB,OACER,EAAAC,EAAAC,cAAA,MAAIC,UAAU,aACXyD,EAAMQ,IAAI,SAAA7D,GACT,OACEP,EAAAC,EAAAC,cAAA,MAAImE,IAAK9D,EAAK+D,IACZtE,EAAAC,EAAAC,cAACqE,EAAD,CACE/D,cAAe,kBAAMA,EAAcD,EAAK+D,KACxC/D,KAAMA,SC5DL2D,EDoEApB,EACblB,IACAxC,YA5BsB,SAAAU,GAA6C,IAAA0E,EAAA1E,EAA1C2E,SACzB,MAAO,CAAEb,MAD0DY,EAA9BZ,MACrBC,QADmDW,EAAvBX,QACnB5C,MAD0CuD,EAAdvD,QAI5B,SAACsB,EAAUmC,GACpC,MAAO,CACLpC,WAAYA,EAAWoC,EAAS3C,iBAAkBQ,GAClD/B,cAAe,SAAA8D,GAAE,OAAI/B,EAASL,EAAgBoC,QAmBnCxB,CAMbW,GEjEakB,EARE,WACf,OACE3E,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC0E,EAAD,QCqEAC,SAAqB,CACzBC,WLnD0B,SAAA3C,GAC1B,MAAO,CACLC,KAAM,yBACNC,QAASF,IKiDX4C,WAAY7C,EACZ8C,SL/C6B,SAAA7C,GAC7B,MAAO,CACLC,KAAM,6BACNC,QAASF,MK8CE/C,cAXS,SAAA+E,GAAiD,IAAAc,EAAAd,EAA9C5E,aAAgBC,EAA8ByF,EAA9BzF,UAA8ByF,EAAnB3F,WACpD,MAAO,CACL4F,MAAO1F,EACPI,MAAOJ,EAAUC,OAAO,SAACC,EAAKC,GAAN,OAAYD,EAAMC,EAAEC,OAAO,KAUrDiF,EAFazF,CAxEW,SAAAU,GAMpB,IALJoF,EAKIpF,EALJoF,MACAtF,EAIIE,EAJJF,MACAmF,EAGIjF,EAHJiF,WACAD,EAEIhF,EAFJgF,WACAE,EACIlF,EADJkF,SAiCA,OACEhF,EAAAC,EAAAC,cAAA,OAAKC,UAAU,uBACZ+E,EAAMjC,QAAU,GAAKjD,EAAAC,EAAAC,cAAA,+CACtBF,EAAAC,EAAAC,cAAA,wBAEAF,EAAAC,EAAAC,cAAA,SAAOC,UAAU,SACfH,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,eACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,sBAIJF,EAAAC,EAAAC,cAAA,aAAQgF,EAAMd,IA/CF,SAACe,EAAMC,GAAQ,IACvBd,EAA4Ba,EAA5Bb,GAAI7D,EAAwB0E,EAAxB1E,MAAOZ,EAAiBsF,EAAjBtF,MAAOD,EAAUuF,EAAVvF,MAC1B,OACEI,EAAAC,EAAAC,cAAA,MAAImE,IAAKC,GACPtE,EAAAC,EAAAC,cAAA,UAAKkF,EAAM,GACXpF,EAAAC,EAAAC,cAAA,UAAKO,GACLT,EAAAC,EAAAC,cAAA,UAAKL,GACLG,EAAAC,EAAAC,cAAA,UAAKN,GACLI,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,UACEa,QAAS,kBAAMiE,EAASV,IACxBnE,UAAU,6CAEVH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,mBAEfH,EAAAC,EAAAC,cAAA,UACEa,QAAS,kBAAMgE,EAAWT,IAC1BnE,UAAU,8CAEVH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,uBAEfH,EAAAC,EAAAC,cAAA,UACEa,QAAS,kBAAM+D,EAAWR,IAC1BnE,UAAU,8CAEVH,EAAAC,EAAAC,cAAA,KAAGC,UAAU,8BAyBnBH,EAAAC,EAAAC,cAAA,OAAKC,UAAU,SAAf,UAA+BP,MCvDtByF,EARE,WACf,OACErF,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAACoF,EAAD,QCHSC,SCKH,WACV,OACEvF,EAAAC,EAAAC,cAAA,QAAMsF,KAAK,OAAOrF,UAAU,aAC1BH,EAAAC,EAAAC,cAACuF,EAAD,CAAY1F,SAAU,EAAGH,MAAO,MAChCI,EAAAC,EAAAC,cAACwF,EAAA,EAAD,KACE1F,EAAAC,EAAAC,cAACyF,EAAA,EAAD,CACEC,KAAK,IACLC,UAAWlB,EACXmB,OAAK,IAEP9F,EAAAC,EAAAC,cAACyF,EAAA,EAAD,CACEC,KAAK,QACLC,UAAWR,QCjBNU,6MCGbC,MAAQ,CACNC,UAAU,sFAIVvC,KAAKwC,SAAS,CAAED,UAAU,qCAI1B,OAAIvC,KAAKsC,MAAMC,SACNjG,EAAAC,EAAAC,cAAC6D,EAAD,MAGFL,KAAK5B,MAAMqE,gBAfoBlC,aCHrBmC,mDACnB1D,KAAO,CACL,CACE4B,GAAI,EACJ7D,MAAO,yBACPC,OAAQ,kBACRC,MAAO,GACPC,WAAY,uDAEd,CACE0D,GAAI,EACJ7D,MAAO,iCACPC,OAAQ,oBACRC,MAAO,GACPC,WACE,iEAEJ,CACE0D,GAAI,EACJ7D,MAAO,oBACPC,OAAQ,oBACRC,MAAO,GACPC,WAAY,+GAGL,IAAAyF,EAAA3C,KACT,OAAO,IAAI4C,QAAQ,SAACC,EAASC,GAC3BC,WAAW,WACT,OAAIC,KAAKC,SAAW,IACXH,EACL,IAAII,MACF,uEAGCL,EAAQF,EAAK3D,OACnB,+BCnCImE,EAAiB,SAACb,EAAOc,GACpC,QAAcC,IAAVf,EACF,MAAO,CACLpC,MAAO,GACP3C,MAAO,KACP4C,SAAS,GAGb,OAAQiD,EAAO1E,MACb,IAAK,sBACH,MAAO,CACLwB,MAAOoC,EAAMpC,MACb3C,MAAO,KACP4C,SAAS,GAGb,IAAK,sBACH,MAAO,CACLD,MAAOkD,EAAOzE,QACdpB,MAAO,KACP4C,SAAS,GAEb,IAAK,sBACH,MAAO,CACLD,MAAO,GACPC,SAAS,EACT5C,MAAO6F,EAAOzE,SAElB,QACE,OAAO2D,EAAMvB,kBC7BbuC,EAAkB,SAACxH,EAAW2F,EAAMC,GACxC,OAAmB,IAAfD,EAAKtF,MACP,GAAAoH,OAAAjF,OAAAkF,EAAA,EAAAlF,CAAWxC,EAAU2H,MAAM,EAAG/B,IAA9BpD,OAAAkF,EAAA,EAAAlF,CAAuCxC,EAAU2H,MAAM/B,EAAM,MAClD,IAATA,EACF,GAAA6B,OAAAjF,OAAAkF,EAAA,EAAAlF,CAAWxC,GAAX,CAAsB2F,IAExB,GAAA8B,OAAAjF,OAAAkF,EAAA,EAAAlF,CAAWxC,EAAU2H,MAAM,EAAG/B,IAA9B,CAAoCD,GAApCnD,OAAAkF,EAAA,EAAAlF,CAA6CxC,EAAU2H,MAAM/B,EAAM,MAW/DgC,EAAc,SAACpB,EAAO7D,EAAQkF,GAAQ,IAE5BzD,EAEVoC,EAFFvB,SAAYb,MACIpE,EACdwG,EADFzG,aAAgBC,UAEZe,EAAOqD,EAAM0D,KAAK,SAAA/G,GAAI,OAAIA,EAAK+D,KAAOnC,IACtCoF,EAAY/H,EAAUgI,UAAU,SAAA1H,GAAA,OAAAA,EAAGwE,KAAgBnC,IAEnDsF,EAjBe,SAAClH,GAAyB,IAAnB4E,EAAmBnC,UAAAC,OAAA,QAAA8D,IAAA/D,UAAA,GAAAA,UAAA,GAAZ,GAAIqE,EAAQrE,UAAAC,OAAA,EAAAD,UAAA,QAAA+D,EAAAW,EACoBvC,EAA3Db,UADuC,IAAAoD,EAClCnH,EAAK+D,GAD6BoD,EAAAC,EACoBxC,EAA7CtF,aADyB,IAAA8H,EACjB,EADiBA,EAAAC,EACoBzC,EAAlC1E,aADc,IAAAmH,EACNrH,EAAKE,MADCmH,EAAAC,EACoB1C,EAAdvF,MACrD,MAAO,CACL0E,KACA7D,QACAZ,MAAOA,EAAQwH,EACfzH,YAN6C,IAAAiI,EACc,EADdA,GAM9BR,EAAM9G,EAAKI,OAWZmH,CAAevH,EADlBf,EAAU+H,GACoBF,GAE3C,MAAO,CACL/H,WAAY,EACZE,UAAWwH,EAAgBhB,EAAMzG,aAAaC,UAAWiI,EAASF,KAIzDQ,EAAqB,SAAC/B,EAAOc,GACxC,QAAcC,IAAVf,EACF,MAAO,CACLxG,UAAW,GACXF,WAAY,GAGhB,OAAQwH,EAAO1E,MACb,IAAK,qBACH,OAAOgF,EAAYpB,EAAOc,EAAOzE,QAAS,GAC5C,IAAK,yBACH,OAAO+E,EAAYpB,EAAOc,EAAOzE,SAAU,GAC7C,IAAK,6BACH,IAAM8C,EAAOa,EAAMzG,aAAaC,UAAU8H,KACxC,SAAAnD,GAAA,OAAAA,EAAGG,KAAgBwC,EAAOzE,UAE5B,OAAO+E,EAAYpB,EAAOc,EAAOzE,SAAU8C,EAAKtF,OAClD,QACE,OAAOmG,EAAMzG,eC9BJyI,EAPC,SAAChC,EAAOc,GACtB,MAAO,CACLvH,aAAcwI,EAAmB/B,EAAOc,GACxCrC,SAAUoC,EAAeb,EAAOc,KCqB9BzH,EAAQ4I,YACZD,EACAE,YAAgBC,IAxBH,SAAA9I,GAAK,OAAI,SAAAkD,GAAQ,OAAI,SAAAuE,GAClC,OACSvE,EADa,kBAAXuE,EACO,CACd1E,KAAM0E,GAGMA,MAEH,SAAAzH,GAAK,OAAI,SAAAkD,GAAQ,OAAI,SAAAuE,GAElC,OADA5F,QAAQC,IAAI,MAAO2F,EAAO1E,MACnBG,EAASuE,QAmBlB5F,QAAQC,IAAI,wBAEZ9B,EAAMkD,SAAS,UACflD,EAAMkD,SANW,SAAAA,GACfkE,WAAW,kBAAMlE,EAAS,CAAEH,KAAM,oBAAqB,OAM1C/C,QCrCT0C,EAAmB,IAAIqE,EAE7BgC,IAASC,OACPrI,EAAAC,EAAAC,cAACoI,EAAA,EAAD,CAAUjJ,MAAOA,GACfW,EAAAC,EAAAC,cAACqI,EAAD,KACEvI,EAAAC,EAAAC,cAACsB,EAAD,CAA0BgH,MAAOzG,GAC/B/B,EAAAC,EAAAC,cAACuI,EAAA,EAAD,KACEzI,EAAAC,EAAAC,cAACwI,EAAD,UAKRC,SAASC,eAAe","file":"static/js/main.577b9928.chunk.js","sourcesContent":["import ShopHeader from './shop-header';\n\nexport default ShopHeader;","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport \"./shop-header.css\";\nimport { Link } from \"react-router-dom\";\nconst ShopHeader = ({ numItems, total, orderTotal, count }) => {\n  return (\n    <header className=\"shop-header row\">\n      <Link className=\"logo text-dark\" to=\"/\">\n        Test Store\n      </Link>\n      <Link className=\"shopping-cart\" to=\"/cart\">\n        <i className=\"cart-icon fa fa-shopping-cart\" />\n        {count} items (${orderTotal})\n      </Link>\n    </header>\n  );\n};\nconst mapStateToProps = store => {\n  return {\n    orderTotal: store.shoppingCart.cartItems.reduce(\n      (acc, i) => acc + i.total,\n      0\n    ),\n    count: store.shoppingCart.cartItems.reduce((acc, i) => acc + i.count, 0)\n  };\n};\nexport default connect(mapStateToProps)(ShopHeader);\n","import BookListItem from './book-list-item';\n\nexport default BookListItem;\n","import React from \"react\";\nimport \"./book-list-item.css\";\n\nconst BookListItem = ({ book, onAddedToCart }) => {\n  const { title, author, price, coverImage } = book;\n  return (\n    <div className=\"book-list-item\">\n      <div className=\"book-cover\">\n        <img src={coverImage} alt=\"cover\" />\n      </div>\n      <div className=\"book-details\">\n        <span className=\"book-title\">{title}</span>\n        <div className=\"book-author\">{author}</div>\n        <div className=\"book-price\">${price}</div>\n        <button onClick={onAddedToCart} className=\"btn btn-info add-to-cart\">\n          Add to cart\n        </button>\n      </div>\n    </div>\n  );\n};\n\nexport default BookListItem;\n","import ErrorIndicator from './error-indicator';\n\nexport default ErrorIndicator;\n","import React from \"react\";\nimport \"./error-indicator.css\";\n\nconst ErrorIndicator = ({ error }) => {\n  console.log(error);\n\n  return <div>Error! {error.message}</div>;\n};\n\nexport default ErrorIndicator;\n","import Spinner from './spinner';\n\nexport default Spinner;\n","import React from 'react';\nimport './spinner.css';\n\nconst Spinner = () => {\n  return <div>loading...</div>;\n};\n\nexport default Spinner;\n","import React from 'react';\n\nconst {\n  Provider: BookstoreServiceProvider,\n  Consumer: BookstoreServiceConsumer\n} = React.createContext();\n\nexport {\n  BookstoreServiceProvider,\n  BookstoreServiceConsumer\n};\n","import React from 'react';\nimport { BookstoreServiceConsumer } from '../bookstore-service-context';\n\nconst withBookstoreService = () => (Wrapped) => {\n\n  return (props) => {\n    return (\n      <BookstoreServiceConsumer>\n        {\n          (bookstoreService) => {\n            return (<Wrapped {...props}\n                     bookstoreService={bookstoreService}/>);\n          }\n        }\n      </BookstoreServiceConsumer>\n    );\n  }\n};\n\nexport default withBookstoreService;\n","const booksRequested = () => {\n  return {\n    type: \"FETCH_BOOKS_REQUEST\"\n  };\n};\n\nconst booksLoaded = newBooks => {\n  return {\n    type: \"FETCH_BOOKS_SUCCESS\",\n    payload: newBooks\n  };\n};\n\nconst booksError = err => {\n  return {\n    type: \"FETCH_BOOKS_FAILURE\",\n    payload: err\n  };\n};\nconst bookAddedToCart = bookID => {\n  return {\n    type: \"BOOK_ADDED_TO_CART\",\n    payload: bookID\n  };\n};\nconst bookRemovedFromCart = bookID => {\n  return {\n    type: \"BOOK_REMOVED_FROM_CART\",\n    payload: bookID\n  };\n};\nconst allBookRemovedFromCart = bookID => {\n  return {\n    type: \"ALL_BOOK_REMOVED_FROM_CART\",\n    payload: bookID\n  };\n};\nconst fetchBooks = (bookstoreService, dispatch) => () => {\n  dispatch(booksRequested());\n  bookstoreService\n    .getBooks()\n    .then(data => dispatch(booksLoaded(data)))\n    .catch(err => dispatch(booksError(err)));\n};\n\nexport {\n  booksRequested,\n  booksError,\n  bookRemovedFromCart,\n  allBookRemovedFromCart,\n  booksLoaded,\n  fetchBooks,\n  bookAddedToCart\n};\n","const compose = (...funcs) => (comp) => {\n  return funcs.reduceRight(\n    (wrapped, f) => f(wrapped), comp);\n};\n\nexport default compose;\n","import React, { Component } from \"react\";\nimport BookListItem from \"../book-list-item\";\nimport { connect } from \"react-redux\";\n\nimport ErrorIndicator from \"../error-indicator\";\nimport Spinner from \"../spinner\";\nimport { withBookstoreService } from \"../hoc\";\nimport {\n  booksLoaded,\n  booksRequested,\n  booksError,\n  bookAddedToCart,\n  fetchBooks\n} from \"../../actions\";\nimport { compose } from \"../../utils\";\n\nimport \"./book-list.css\";\n\nclass BookListContainer extends Component {\n  componentDidMount() {\n    // 1. receive data\n    // const {\n    //   bookstoreService,\n    //   booksLoaded,\n    //   booksRequested,\n    //   booksError\n    // } = this.props;\n    // booksRequested();\n    // bookstoreService\n    //   .getBooks()\n    //   .then(data => booksLoaded(data))\n    //   .catch(err => booksError(err));\n    this.props.fetchBooks();\n    // 2. dispacth action to store\n  }\n\n  render() {\n    const { books, loading, error, onAddedToCart } = this.props;\n    if (loading) return <Spinner />;\n    if (error) return <ErrorIndicator error={error} />;\n    return <BookList onAddedToCart={onAddedToCart} books={books} />;\n  }\n}\n\nconst mapStateToProps = ({ bookList: { books, loading, error } }) => {\n  return { books, loading, error };\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    fetchBooks: fetchBooks(ownProps.bookstoreService, dispatch),\n    onAddedToCart: id => dispatch(bookAddedToCart(id))\n  };\n};\nconst BookList = ({ books, onAddedToCart }) => {\n  return (\n    <ul className=\"book-list\">\n      {books.map(book => {\n        return (\n          <li key={book.id}>\n            <BookListItem\n              onAddedToCart={() => onAddedToCart(book.id)}\n              book={book}\n            />\n          </li>\n        );\n      })}\n    </ul>\n  );\n};\nexport default compose(\n  withBookstoreService(),\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )\n)(BookListContainer);\n","import BookList from './book-list';\n\nexport default BookList;\n","import React from \"react\";\nimport BookList from \"../book-list\";\n\nconst HomePage = () => {\n  return (\n    <div>\n      <BookList />\n    </div>\n  );\n};\n\nexport default HomePage;\n","import React from \"react\";\nimport \"./shopping-cart-table.css\";\nimport { connect } from \"react-redux\";\nimport {\n  bookRemovedFromCart,\n  bookAddedToCart,\n  allBookRemovedFromCart\n} from \"../../actions\";\nconst ShoppingCartTable = ({\n  items,\n  total,\n  onIncrease,\n  onDecrease,\n  onDelete\n}) => {\n  const renderRow = (item, idx) => {\n    const { id, title, count, total } = item;\n    return (\n      <tr key={id}>\n        <td>{idx + 1}</td>\n        <td>{title}</td>\n        <td>{count}</td>\n        <td>{total}</td>\n        <td>\n          <button\n            onClick={() => onDelete(id)}\n            className=\"btn btn-outline-danger btn-sm float-right\"\n          >\n            <i className=\"fa fa-trash-o\" />\n          </button>\n          <button\n            onClick={() => onIncrease(id)}\n            className=\"btn btn-outline-success btn-sm float-right\"\n          >\n            <i className=\"fa fa-plus-circle\" />\n          </button>\n          <button\n            onClick={() => onDecrease(id)}\n            className=\"btn btn-outline-warning btn-sm float-right\"\n          >\n            <i className=\"fa fa-minus-circle\" />\n          </button>\n        </td>\n      </tr>\n    );\n  };\n  return (\n    <div className=\"shopping-cart-table\">\n      {items.length <= 0 && <h4>Your cart is empty. Add something</h4>}\n      <h2>Your Order</h2>\n\n      <table className=\"table\">\n        <thead>\n          <tr>\n            <th>#</th>\n            <th>Item</th>\n            <th>Count</th>\n            <th>Price</th>\n            <th>Action</th>\n          </tr>\n        </thead>\n\n        <tbody>{items.map(renderRow)}</tbody>\n      </table>\n\n      <div className=\"total\">Total: {total}</div>\n    </div>\n  );\n};\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\n  return {\n    items: cartItems,\n    total: cartItems.reduce((acc, i) => acc + i.total, 0)\n  };\n};\nconst mapDispatchToProps = {\n  onDecrease: bookRemovedFromCart,\n  onIncrease: bookAddedToCart,\n  onDelete: allBookRemovedFromCart\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(ShoppingCartTable);\n","import React from \"react\";\nimport ShoppingCartTable from \"../shopping-cart-table/shopping-cart-table\";\nconst CartPage = () => {\n  return (\n    <div>\n      <ShoppingCartTable />\n    </div>\n  );\n};\n\nexport default CartPage;\n","import App from './app';\n\nexport default App;\n","import React from 'react';\nimport { Route, Switch } from 'react-router-dom';\nimport ShopHeader from '../shop-header';\nimport { HomePage, CartPage } from '../pages';\n\nimport './app.css';\n\nconst App = () => {\n  return (\n    <main role=\"main\" className=\"container\">\n      <ShopHeader numItems={5} total={210}/>\n      <Switch>\n        <Route\n          path=\"/\"\n          component={HomePage}\n          exact />\n\n        <Route\n          path=\"/cart\"\n          component={CartPage}\n          />\n      </Switch>\n    </main>\n  );\n};\n\nexport default App;\n","import ErrorBoundry from './error-boundry';\n\nexport default ErrorBoundry;\n","import React, { Component } from 'react';\nimport ErrorIndicator from '../error-indicator';\n\nexport default class ErrorBoundry extends Component {\n\n  state = {\n    hasError: false\n  };\n\n  componentDidCatch() {\n    this.setState({ hasError: true });\n  }\n\n  render() {\n    if (this.state.hasError) {\n      return <ErrorIndicator />;\n    }\n\n    return this.props.children;\n  }\n}","export default class BookstoreService {\n  data = [\n    {\n      id: 1,\n      title: \"Googling for the Regex\",\n      author: \"Susan J. Fowler\",\n      price: 32,\n      coverImage: \"https://boyter.org/static/books/Cn1rWcbWcAAgsCA.jpg\"\n    },\n    {\n      id: 2,\n      title: \"Bloated Jabbascript frameworks\",\n      author: \"Michael T. Nygard\",\n      price: 45,\n      coverImage:\n        \"https://boyter.org/static/books/ChnulxvW0AEUs1J.jpg-large.jpg\"\n    },\n    {\n      id: 3,\n      title: \"Coding on Weekend\",\n      author: \"Michael T. Nygard\",\n      price: 60,\n      coverImage: \"https://boyter.org/static/books/Cg0x8vnXEAEB2Le.jpg\"\n    }\n  ];\n  getBooks() {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        if (Math.random() > 0.75)\n          return reject(\n            new Error(\n              \"It's a test error to prove error handling. Reload page to see app.\"\n            )\n          );\n        return resolve(this.data);\n      }, 700);\n    });\n  }\n}\n","export const updateBookList = (state, action) => {\n  if (state === undefined) {\n    return {\n      books: [],\n      error: null,\n      loading: true\n    };\n  }\n  switch (action.type) {\n    case \"FETCH_BOOKS_REQUEST\":\n      return {\n        books: state.books,\n        error: null,\n        loading: true\n      };\n\n    case \"FETCH_BOOKS_SUCCESS\":\n      return {\n        books: action.payload,\n        error: null,\n        loading: false\n      };\n    case \"FETCH_BOOKS_FAILURE\":\n      return {\n        books: [],\n        loading: false,\n        error: action.payload\n      };\n    default:\n      return state.bookList;\n  }\n};\n","const updateCartItems = (cartItems, item, idx) => {\n  if (item.count === 0)\n    return [...cartItems.slice(0, idx), ...cartItems.slice(idx + 1)];\n  if (idx === -1) {\n    return [...cartItems, item];\n  }\n  return [...cartItems.slice(0, idx), item, ...cartItems.slice(idx + 1)];\n};\nconst updateCartItem = (book, item = {}, qty) => {\n  const { id = book.id, count = 0, title = book.title, total = 0 } = item;\n  return {\n    id,\n    title,\n    count: count + qty,\n    total: total + qty * book.price\n  };\n};\nconst updateOrder = (state, bookID, qty) => {\n  const {\n    bookList: { books },\n    shoppingCart: { cartItems }\n  } = state;\n  const book = books.find(book => book.id === bookID);\n  const itemIndex = cartItems.findIndex(({ id }) => id === bookID);\n  const item = cartItems[itemIndex];\n  const newItem = updateCartItem(book, item, qty);\n\n  return {\n    orderTotal: 0,\n    cartItems: updateCartItems(state.shoppingCart.cartItems, newItem, itemIndex)\n  };\n};\n\nexport const updateShoppingCart = (state, action) => {\n  if (state === undefined) {\n    return {\n      cartItems: [],\n      orderTotal: 0\n    };\n  }\n  switch (action.type) {\n    case \"BOOK_ADDED_TO_CART\":\n      return updateOrder(state, action.payload, 1);\n    case \"BOOK_REMOVED_FROM_CART\":\n      return updateOrder(state, action.payload, -1);\n    case \"ALL_BOOK_REMOVED_FROM_CART\":\n      const item = state.shoppingCart.cartItems.find(\n        ({ id }) => id === action.payload\n      );\n      return updateOrder(state, action.payload, -item.count);\n    default:\n      return state.shoppingCart;\n  }\n};\n","import { updateBookList } from \"./book-list\";\nimport { updateShoppingCart } from \"./shopping-cart\";\nconst initialState = {\n  bookList: {\n    books: [],\n    error: null,\n    loading: true\n  },\n  shoppingCart: {\n    cartItems: [],\n    orderTotal: 0\n  }\n};\n\nconst reducer = (state, action) => {\n  return {\n    shoppingCart: updateShoppingCart(state, action),\n    bookList: updateBookList(state, action)\n  };\n};\n\nexport default reducer;\n","import { createStore, compose, applyMiddleware } from \"redux\";\nimport thunkMiddleware from \"redux-thunk\";\nimport reducer from \"./reducers\";\n// const stringEnhancer = createStore => (...args) => {\n//   const store = createStore(...args);\n//   const originalDispatch = store.dispatch;\n//   store.dispatch = action => {\n//     if (typeof action === \"string\") {\n//       return originalDispatch({\n//         type: action\n//       });\n//     }\n//     return originalDispatch(action);\n//   };\n//   return store;\n// };\nconst strMid = store => dispatch => action => {\n  if (typeof action === \"string\") {\n    return dispatch({\n      type: action\n    });\n  }\n  return dispatch(action);\n};\nconst logMid = store => dispatch => action => {\n  console.log(\"LOG\", action.type);\n  return dispatch(action);\n};\n// const logEnhancer = createStore => (...args) => {\n//   const store = createStore(...args);\n//   const originalDispatch = store.dispatch;\n//   store.dispatch = action => {\n//     console.log(\"LOG\", action.type);\n\n//     return originalDispatch(action);\n//   };\n//   return store;\n// };\nconst store = createStore(\n  reducer,\n  applyMiddleware(thunkMiddleware, strMid, logMid)\n);\nconst myAction = dispatch => {\n  setTimeout(() => dispatch({ type: \"DELAYED_ACTION\" }), 2000);\n};\nconsole.log(\"AAAAAAAAAAAAAAAAAAAa\");\n\nstore.dispatch(\"HELL1O\");\nstore.dispatch(myAction);\nexport default store;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter as Router } from 'react-router-dom';\n\nimport App from './components/app';\nimport ErrorBoundry from './components/error-boundry';\nimport BookstoreService from './services/bookstore-service';\nimport { BookstoreServiceProvider } from './components/bookstore-service-context';\n\nimport store from './store';\n\nconst bookstoreService = new BookstoreService();\n\nReactDOM.render(\n  <Provider store={store}>\n    <ErrorBoundry>\n      <BookstoreServiceProvider value={bookstoreService}>\n        <Router>\n          <App />\n        </Router>\n      </BookstoreServiceProvider>\n    </ErrorBoundry>\n  </Provider>,\n  document.getElementById('root')\n);"],"sourceRoot":""}